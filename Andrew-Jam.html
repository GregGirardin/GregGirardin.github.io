<!--
{
  "name": "Andrew-Jam",
  "sets": [
    {
      "name": "Set",
      "songs": [
        {
          "name": "Saturday's Children",
          "artist": "Cirles Around The Sun",
          "id": "Saturday_s_Children.Cirles_Around_The_Sun",
          "css_highlight": false,
          "medley": false
        },
        {
          "name": "Wet Sand",
          "artist": "Red Hot Chili Peppers",
          "id": "Wet_Sand.Red_Hot_Chili_Peppers",
          "css_highlight": false,
          "medley": false
        },
        {
          "name": "Let Loose",
          "artist": "Mount Joy",
          "id": "Let_Loose.Mount_Joy",
          "css_highlight": false,
          "medley": false
        },
        {
          "name": "Pool House",
          "artist": "Back Seat Lovers",
          "id": "Pool_House.Back_Seat_Lovers",
          "css_highlight": false,
          "medley": false
        },
        {
          "name": "Interstate Love Song",
          "artist": "STP",
          "id": "Interstate_Love_Song.STP",
          "css_highlight": false,
          "medley": false
        },
        {
          "name": "Got Me Wrong",
          "artist": "Alice In Chains",
          "id": "Got_Me_Wrong.Alice_In_Chains",
          "css_highlight": false,
          "medley": false
        },
        {
          "name": "All I Need",
          "artist": "Goose",
          "id": "All_I_Need.Goose",
          "css_highlight": false,
          "medley": false
        },
        {
          "name": "Julia",
          "artist": "Mount Joy",
          "id": "Julia.Mount_Joy",
          "css_highlight": false,
          "medley": false
        },
        {
          "name": "Under The Bridge",
          "artist": "Red Hot Chili Peppers",
          "id": "Under_The_Bridge.Red_Hot_Chili_Peppers",
          "css_highlight": false,
          "medley": false
        },
        {
          "name": "Psycho Killer",
          "artist": "Talking Heads",
          "id": "Psycho_Killer.Talking_Heads",
          "css_highlight": false,
          "medley": false
        }
      ]
    },
    {
      "name": "Clipboard",
      "songs": []
    }
  ]
}
-->
<!DOCTYPE html><html><head><meta name='viewport' content='width=device-width, initial-scale=1'>
<title>Andrew-Jam</title>

<style type="text/css">
.accordion
{
  border: 2px solid white;
  background-color: #def;
  color: #444;
  padding: 6px;
  text-align: left;
  outline: none;
  font-size: 16px;
  transition: 0.2s;
}

.fixedFont
{
  font-family: monospace;
}

.panel
{
  padding: 0 18px;
  display: none;
  overflow: hidden;
  font-size: 20px;
  background-color: #fee;
  text-align: left;
}

.css_medleyStart
{
  position:relative;
  overflow:hidden;
  background: #ddf;
  clip-path: polygon( 0% 0%, 90% 0, 100% 50%, 90% 100%, 0% 100%, 5% 50% );
}

.css_medleyCont
{
  position:relative;
  overflow:hidden;
  background: #ddf;
  clip-path: polygon( 0 15%, 95% 15%, 95% 85%, 0% 85% );
}

.css_medleyEnd
{
  position:relative;
  overflow:hidden;
  background: #ddf;
  clip-path: polygon( 0% 0%, 95% 0%, 85% 50%, 95% 100%, 0% 100% );
}

.css_highlight
{
  color: #d33;
}

.css_topButtons
{
  background-color: #fdd;
  padding: 10px;
  font-size: 16px;
}

</style>
</head>

<body align="center">
<button class="css_topButtons" id="fontButtonFixed" onclick="fontFixed();">Fixed</button>
<button class="css_topButtons" id="fontButton+" onclick="fontPlus();">Font +</button>
<button class="css_topButtons" id="fontButton-" onclick="fontMinus();">Font -</button>
<button id="fontSizeButton">Size</button>
<button class="css_topButtons" id="verticalButton+" onclick="displayPlus();">Expand</button>
<button class="css_topButtons" id="verticalButton-" onclick="displayMinus();">Shrink</button>
<hr><div class='setname'>Set</div>
<button class='accordion'>1. Saturday's Children</button>
<div class='panel'>
E D A G D E<br>
<br>
(no lyrics)<br>
<br>
</div>

<button class='accordion'>2. Wet Sand</button>
<div class='panel'>
<font style='font-family:courier;'>
I: G D Em Bm<br>
V: G D Em Bm<br>
</font>
Pre-C: Em-G-D-Em x3 - Em G D<br>
<font style='font-family:courier;'>
C: E C E<br>
B: E-F#-G#m x2 - E-F#-G#m-F#-E-D# - E-F#-G#m x2 - E-F#-G#m-F#-E<br>
O: E-F#-G#m x2 - E-F#-G#m-F#-G#m<br>
</font>
&nbsp;&nbsp;&nbsp;G#m-D#m-EM7 x2 - G#m-D#m-EM7-D#m-G#m<br>
&nbsp;&nbsp;&nbsp;G#m-D#m-EM7 x2 - G#m-D#m-EM7-D#m-G#m<br>
<br>
My shadow side so amplified<br>
Keeps coming back dissatisfied<br>
Elementary son but it's so<br>
My love affair with everywhere<br>
Was innocent why do you care?<br>
Someone start the car, time to go<br>
<br>
You're the best I know<br>
<br>
My sunny side has up and died<br>
I'm betting that when we collide<br>
The universe will shift into a low<br>
The travesties that we have seen<br>
Are treating me like Benzedrine<br>
Automatic laughter from a pro<br>
<br>
My what a good day for a walk outside<br>
I'd like to get to know you a little better, baby<br>
God knows that I really tried<br>
My what a good day for a take out bride<br>
I'd like to say we did it for the better of<br>
<br>
I saw you there so unaware<br>
Those hummingbirds all in your hair<br>
Elementary son but it's so<br>
The disrepair of Norma Jean<br>
Could not compare to your routine<br>
Balarama beauty going toe to toe<br>
<br>
My what a good day for a let it slide<br>
I'd like to say we did it for the better of<br>
<br>
I thought about it<br>
And I brought it out<br>
I'm motivated by the lack of doubt<br>
I'm consecrated but I'm not devout<br>
The mother, the father, the daughter<br>
<br>
Right on the verge, just one more dose<br>
I'm travelling from coast to coast<br>
My theory isn't perfect but it's close<br>
I'm almost there, why should I care?<br>
My heart is hurting when I share<br>
Someone open up, let it show<br>
<br>
My what a good day for a walk outside<br>
I'd like to think we did it for the better of<br>
<br>
I thought about it and I brought it out<br>
I'm motivated by the lack of doubt<br>
I'm consecrated but I'm not devout<br>
The mother, the father, the daughter<br>
<br>
Oh you don't form in the wet sand<br>
You don't form at all<br>
Oh, you don't form in the wet sand<br>
I do<br>
Yeah<br>
<br>
You don't form in the wet sand<br>
You don't form at all<br>
Oh, you don't form in the wet sand<br>
I do<br>
Yeah<br>
<br>
</div>

<button class='accordion'>3. Let Loose</button>
<div class='panel'>
<font style='font-family:courier;'>
I: G F C x2<br>
V: G F C x4 - G F C G/B Gm/Bb F/A Fm/Ab G<br>
C: G F C<br>
O: G F C x8 - G F C G/B Gm/Bb F/A Fm/Ab G<br>
</font>
<br>
Wonder if I'm ever gonna come back for you<br>
Stuck in the groove like I don't know what to do<br>
Wonder if I'll ever lose<br>
When you're the only one that knows what I'm goin' through<br>
<br>
&nbsp;&nbsp;Like help won't save us with our trouble<br>
&nbsp;&nbsp;I just need some love forever<br>
&nbsp;&nbsp;After all, our time has come<br>
<br>
Yes, I wanna get lost, I wanna get loud with you<br>
And when I get low, I wanna get high with you<br>
Watch that snow fall on the remains of our youth<br>
Just pull me in and don't let loose<br>
<br>
Wonder if I'm ever gonna go find my truth<br>
Wonder if we were born to see this through<br>
How could we let the seasons choose?<br>
When you're the only one I ever belonged to<br>
<br>
&nbsp;&nbsp;Like help won't save us with our trouble<br>
&nbsp;&nbsp;I just need some love forever<br>
&nbsp;&nbsp;After all<br>
<br>
I wanna get lost, I wanna get loud with you<br>
And when I get low, I wanna get high with you<br>
Watch that snow fall on the remains of our youth<br>
Just pull me in and don't let loose<br>
<br>
</div>

<button class='accordion'>4. Pool House</button>
<div class='panel'>
<font style='font-family:courier;'>
I: G Em Am D7<br>
V: G Em Am D7 x3 - D<br>
C: G Em Am D7<br>
</font>
<br>
Waiting around for something to change my mood<br>
'Cause I know that what's in these plastic cups isn't going to<br>
Kids on the lawn stuck in pairs of two<br>
Your lunch is on its way back up<br>
But you're still in the pool<br>
<br>
&nbsp;&nbsp;Wait inside<br>
&nbsp;&nbsp;I'll be fine<br>
&nbsp;&nbsp;I guess I'll sit outside<br>
&nbsp;&nbsp;While you change your mind<br>
<br>
I'll risk it all to find a place where I can hear my thoughts<br>
Songs playing too loud<br>
But upstairs they're still making out<br>
<br>
I'm getting all choked up<br>
I guess it's just my luck<br>
And I'm stuck on the porch<br>
What am I waiting for?<br>
<br>
&nbsp;&nbsp;Chorus<br>
<br>
&nbsp;&nbsp;Wait inside<br>
&nbsp;&nbsp;I'll be fine<br>
&nbsp;&nbsp;Wait inside<br>
&nbsp;&nbsp;Change your mind<br>
&nbsp;&nbsp;Oh, honey, change your mind<br>
<br>
</div>

<button class='accordion'>5. Interstate Love Song</button>
<div class='panel'>
Intro<br>
<br>
Riff x 2<br>
<br>
Waiting on a Sunday afternoon<br>
For what I read between the lines, your lies<br>
<br>
Feelin' like a hand in rusted shame<br>
So do you laugh at those who cry? Reply?<br>
<br>
Riff x 1<br>
<br>
&nbsp;&nbsp;Leavin' on a southern train only yesterday you lied,<br>
&nbsp;&nbsp;Promises of what I seemed to be<br>
&nbsp;&nbsp;Only watched the time go by all of these things you said to me<br>
<br>
Riff x 2<br>
<br>
Breathin' is the hardest thing to do<br>
With all I've said and all that's dead for you, you lied, Good bye<br>
<br>
&nbsp;&nbsp;Leavin' on a southern train only yesterday you lied,<br>
&nbsp;&nbsp;Promises of what I seemed to be<br>
&nbsp;&nbsp;Only watched the time go by all of these things I said to you<br>
<br>
</div>

<button class='accordion'>6. Got Me Wrong</button>
<div class='panel'>
<font style='font-family:courier;'>
I: Ab E F# x4<br>
V: Ab E F# x8<br>
C: D-F-C#-A - Ab-E-F# x2<br>
</font>
&nbsp;&nbsp;&nbsp;D-F-C#-A - E-F#-A x4<br>
&nbsp;&nbsp;&nbsp;F#-A - Ab-E-F# x2<br>
<font style='font-family:courier;'>
O: Ab E F# x3 Ab<br>
</font>
<br>
Yeah, yeah, it goes away<br>
All of this and more of nothing in my life<br>
No, color clay<br>
Individuality not safe<br>
<br>
&nbsp;&nbsp;As of now, I bet you've got me wrong<br>
&nbsp;&nbsp;So unsure you run from something strong<br>
<br>
I-I can't let go<br>
Threadbare tapestry unwinding slow<br>
Feel a tortured brain<br>
Show your belly like you want me to<br>
<br>
&nbsp;&nbsp;As of now, I bet you got me wrong<br>
&nbsp;&nbsp;So unsure, we reach for something strong<br>
<br>
&nbsp;&nbsp;I haven't felt like this in so long<br>
&nbsp;&nbsp;Wrong<br>
&nbsp;&nbsp;In a sense too far gone from love<br>
&nbsp;&nbsp;That don't last forever<br>
&nbsp;&nbsp;Something's gotta turn out right<br>
<br>
You, sugar taste<br>
Sweetness doesn't often touch my face<br>
Stay if you please<br>
You may not be here when I leave<br>
<br>
&nbsp;&nbsp;As of now, I bet you got me wrong<br>
&nbsp;&nbsp;So unsure, we reach for something strong<br>
<br>
&nbsp;&nbsp;I haven't felt like this in so long<br>
&nbsp;&nbsp;Wrong<br>
&nbsp;&nbsp;In a sense too far gone from love<br>
&nbsp;&nbsp;Strong<br>
<br>
&nbsp;&nbsp;I haven't felt like this in so long<br>
&nbsp;&nbsp;Wrong<br>
&nbsp;&nbsp;In a sense too far gone from love<br>
&nbsp;&nbsp;That don't last forever<br>
&nbsp;&nbsp;Something's gotta turn out right<br>
<br>
</div>

<button class='accordion'>7. All I Need</button>
<div class='panel'>
<font style='font-family:courier;'>
I: Am-C x2 C-Am x2 Am/D C<br>
V: Am-C x8<br>
C: C D A-C-G x2 C D A-C-G x2<br>
S: A G repeat<br>
</font>
<br>
So my time will come when I have the right mind<br>
Rid my mind of this hesitation can’t think why<br>
All I need is coming, though it’s not here quite yet<br>
Here I have seen the same thing<br>
Pretend not to mind it<br>
<br>
&nbsp;&nbsp;I’d like to be closer to me<br>
&nbsp;&nbsp;Or who I think I want to be<br>
&nbsp;&nbsp;Things change but you don't realize<br>
&nbsp;&nbsp;You have all you need<br>
<br>
&nbsp;&nbsp;Solo 1<br>
<br>
Dare not talk the truth I have locked up inside<br>
Where is that key to the chain holding back my mind<br>
All I need is coming, though it’s not here quite yet<br>
Here I have seen the same thing<br>
Pretend not to mind it<br>
<br>
&nbsp;&nbsp;Chorus<br>
<br>
&nbsp;&nbsp;Solo 2<br>
<br>
&nbsp;&nbsp;Chorus<br>
<br>
&nbsp;&nbsp;Awh awh<br>
&nbsp;&nbsp;Ooh ooh ooh<br>
&nbsp;&nbsp;Awh awh<br>
<br>
</div>

<button class='accordion'>8. Julia</button>
<div class='panel'>
V1: Gm F Gm F Gm<br>
<font style='font-family:courier;'>
S: Bb Am C<br>
</font>
V2: Gm-F x2<br>
<font style='font-family:courier;'>
C: Gm-F x2<br>
</font>
Interlude: Bb Am F C Bb F<br>
<font style='font-family:courier;'>
B: Bb-F x3 - Am7-Gm7 x2<br>
O: Gm-F x2 - C Bb Am F<br>
</font>
<br>
Straighten my sweater, fix my spine, step up in line<br>
I'm ordering food high, and I don't know why<br>
I'm so nervous, I won't make it<br>
'Cause that's my favorite waitress<br>
<br>
Those big brown eyes<br>
I don't know what I ordered<br>
But she's smiling like I can't afford it<br>
Ooh, ooh, ooh (alright)<br>
<br>
Addicted to TED Talks, waiting for lift off<br>
But I don't know it if it's doing much<br>
'Cause I just lost my mind in the fluorescent light of my life<br>
In my mind, a river running free like rabbits<br>
<br>
But Julia<br>
Fix me a blue sky in the warm sun, and I'll be back now<br>
Julia<br>
How long, how long 'til I'm all gone? 'Cause here I am<br>
<br>
Just stumbling down Elysian fields<br>
A Spanish moss and a southern feel<br>
The silver moonlight in the trees, and the Devil's in my bloodstream<br>
Don't say you loved the old me<br>
<br>
Whoa, now<br>
Whoa, now<br>
Whoa, now, ooh<br>
Whoa, now, ooh<br>
<br>
Oh, stumbling down Elysian fields<br>
Your vision coming clear<br>
Yeah, I don't know where home is<br>
And the door's wide open<br>
<br>
Julia<br>
How long, how long, how long? Oh, lord, oh, lord<br>
Julia<br>
How long, how long 'til it's all gone? How long, how long?<br>
<br>
'Cause you deserve a man to lead you in<br>
But here I am just stumbling down Elysian fields again<br>
<br>
<br>
</div>

<button class='accordion'>9. Under The Bridge</button>
<div class='panel'>
<font style='font-family:courier;'>
I: D-F# x4<br>
V: E-B-C#m-G#m-A-E-B-C#m-A x2 EM7<br>
C: F#m-E-B/F#-F#m-E-B/F#-F#m x2<br>
</font>
Interlude1: E B C#m G#m A E B C#m A<br>
Interlude2: A-Am7-G6-FM7 x3 FM7 E7 GM7<br>
<font style='font-family:courier;'>
O: A-Am-G6-FM7 x4<br>
</font>
<br>
Sometimes I feel like I don't have a partner<br>
Sometimes I feel like my only friend<br>
Is the city I live in, the city of angels<br>
Lonely as I am, together we cry<br>
<br>
I drive on her streets 'cause she's my companion<br>
I walk through her hills 'cause she knows who I am<br>
She sees my good deeds and she kisses me windy<br>
Well, I never worry, now that is a lie<br>
<br>
&nbsp;&nbsp;I don't ever want to feel like I did that day<br>
&nbsp;&nbsp;Take me to the place I love, take me all the way<br>
&nbsp;&nbsp;I don't ever want to feel like I did that day<br>
&nbsp;&nbsp;Take me to the place I love, take me all the way<br>
<br>
&nbsp;&nbsp;Yeah, yeah, yeah<br>
<br>
It's hard to believe that there's nobody out there<br>
It's hard to believe that I'm all alone<br>
At least I have her love, the city she loves me<br>
Lonely as I am, together we cry<br>
<br>
&nbsp;&nbsp;Chorus<br>
<br>
&nbsp;&nbsp;Yeah, yeah, yeah, yeah<br>
&nbsp;&nbsp;Oh, no, no, no, yeah, yeah<br>
&nbsp;&nbsp;Love me, I said yeah, yeah<br>
<br>
&nbsp;&nbsp;One time (Under the bridge downtown)<br>
&nbsp;&nbsp;Is where I drew some blood (Under the bridge downtown)<br>
&nbsp;&nbsp;I could not get enough (Under the bridge downtown)<br>
&nbsp;&nbsp;Forgot about my love (Under the bridge downtown)<br>
&nbsp;&nbsp;I gave my life away<br>
<br>
&nbsp;&nbsp;Yeah, yeah, yeah, yeah (ooh)<br>
&nbsp;&nbsp;Oh, no, no, no, yeah, yeah<br>
&nbsp;&nbsp;I said oh, yeah, yeah<br>
&nbsp;&nbsp;Where I'll stay (ooh)<br>
<br>
</div>

<button class='accordion'>10. Psycho Killer</button>
<div class='panel'>
<font style='font-family:courier;'>
E|-5-8-<br>
B|-5-7-<br>
G|---8-<br>
</font>
<br>
<font style='font-family:courier;'>
I: Am G&nbsp;&nbsp;&nbsp;V: A Em G&nbsp;&nbsp;&nbsp;C: F G Am - F G C&nbsp;&nbsp;&nbsp;B: Bm G - A G<br>
</font>
<br>
I cant seem to face up to the facts<br>
I'm tense and nervous and I cant relax<br>
I cant sleep cause my beds on fire<br>
Don't touch me I'm a real live wire<br>
<br>
&nbsp;&nbsp;Psycho killer qu'est que c'est fa fa.. far better<br>
&nbsp;&nbsp;Run run... away.. oh yeah..<br>
<br>
You start a conversation you can't even finish it<br>
You're talking a lot, but you're not saying anything<br>
When I have nothing to say, my lips are sealed<br>
Say something once, why say it again?<br>
<br>
Chorus<br>
<br>
&nbsp;&nbsp;Ce que j'ai fais ce soir la<br>
&nbsp;&nbsp;Ce qu' elle a dit ce soir la<br>
&nbsp;&nbsp;Realisant mon espoir je me lance vers la gloire okay<br>
<br>
We are vain and we are blind<br>
I hate people when they're not polite<br>
<br>
Chorus<br>
<br>
Alternate V2<br>
I passed out hours ago<br>
I'm sadder than you'll ever know<br>
I close my eyes on this sunny day<br>
Say something once, why say it again?<br>
<br>
</div>


<script>
const minFont = 14
const maxFont = 24;
var fontSize = 16;

var fixed = false;

function fontFixed()
{
  fixed = !fixed;

  var panels = document.getElementsByClassName( "panel" );

  for( var i = 0;i < panels.length;i++ )
    if( fixed )
      panels[ i ].classList.add( "fixedFont" );
    else
      panels[ i ].classList.remove( "fixedFont" );
}

function fontPlus()
{
  fontSize += 2;
  if( fontSize > maxFont )
    fontSize = maxFont;

  setFontProperty( fontSize );
}

function fontMinus()
{
  fontSize -= 2;
  if( fontSize < minFont )
    fontSize = minFont;

  setFontProperty( fontSize );
}

function setFontProperty()
{
  var fontSizeStr = fontSize.toString() + "px";
  var elem = document.getElementById( "fontSizeButton" );
  elem.style.fontSize = fontSizeStr;
  elem.innerHTML = fontSizeStr;

  for( var i = 0;i < acc.length;i++ )
    acc[ i ].nextElementSibling.style.fontSize = fontSizeStr;
}

const DISPLAY_MIN = 0;
const DISPLAY_MED1 = 1;
const DISPLAY_MED2 = 2;
const DISPLAY_LARGE = 3;

var displayFormat = DISPLAY_LARGE;

function displayPlus()
{
  if( displayFormat < DISPLAY_LARGE )
  {
    displayFormat++;
    displaySet( displayFormat );
  }
}

function displayMinus()
{
  if( displayFormat > DISPLAY_MIN )
  {
    displayFormat--;
    displaySet( displayFormat );
  }
}

function closeAll()
{
  // Close all accordions
  for( var i = 0;i < acc.length;i++ )
  {
    acc[ i ].nextElementSibling.style.display = "none"; 
    acc[ i ].classList.remove( "active" );
  }
}

function displaySet( disFormat )
{
  var minWProp;
  var fSize = "16px"; // Font size of song names in accordions
  var slFontSize; // set list font size

  closeAll();

  var clipPath;

  switch( disFormat )
  {
    case DISPLAY_MIN:
      minWProp = "3%";
      fSize = "20px";
      clipPath = "polygon( 0% 0%, 60% 0, 100% 50%, 60% 100%, 0% 100% )";
      break;

    case DISPLAY_MED1:
      minWProp = "9%";
      fSize = "10px";
      clipPath = "polygon( 0% 0%, 70% 0, 100% 50%, 70% 100%, 0% 100% )";
      break;

    case DISPLAY_MED2:
      minWProp = "24%";
      slFontSize = "100%";
      clipPath = "polygon( 0% 0%, 85% 0, 95% 50%, 85% 100%, 0% 100% )";
      break;

    case DISPLAY_LARGE:
      minWProp = "50%";
      slFontSize = "150%";
      clipPath = "polygon( 0% 0%, 85% 0, 95% 50%, 85% 100%, 0% 100% )";
      break;
  }

  var sets = document.getElementsByClassName( "setname" );
  for( var i = 0;i < sets.length;i++ )
    if( slFontSize )
    {
      sets[ i ].style.fontSize = slFontSize;
      sets[ i ].style.display = "block";
    }
    else
      sets[ i ].style.display = "none";

  for( var i = 0;i < acc.length;i++ )
  {
    acc[ i ].style.minWidth = minWProp;

    var strName;
    var prune = songNames[ i ][ 1 ] == '.' ? 0 : 1;
    if( disFormat == DISPLAY_MIN )
      strName = songNames[ i ].substr( 0, 1 + prune );
    else if( disFormat == DISPLAY_MED1 )
      strName = songNames[ i ].substr( 2 + prune, 10 + prune );
    else if( disFormat == DISPLAY_MED2 )
      strName = songNames[ i ].substr( 0, 20 );
    else
      strName = songNames[ i ];

    acc[ i ].innerHTML = strName;
    acc[ i ].style.fontSize = fSize;
    if( acc[ i ].classList.contains( "css_medleyStart" ) )
      acc[ i ].style.clipPath = clipPath;
  }
}

var scrollToElem; 

function expandSongNameByIndex( i )
{
  acc[ i ].innerHTML = songNames[ i ];
  acc[ i ].style.minWidth = "96%";
  acc[ i ].style.fontSize = "16px";
  if( acc[ i ].classList.contains( "css_medleyStart" ) )
    acc[ i ].style.clipPath = "polygon( 0% 0%, 85% 0, 95% 50%, 85% 100%, 0% 100% )";
}

var currentSong = 0;

function accordionClick( elem, keepOpen=false )
{
  currentSong = elem.accIndex;

  var wasOpen = elem.classList.contains( "active" );

  if( wasOpen && ( elem.classList.contains( "css_medleyCont" ) || elem.classList.contains( "css_medleyEnd" ) ) )
  {
    elem.scrollIntoView();
    return;
  }

  closeAll();
  displaySet( displayFormat ); 

  if( !wasOpen || keepOpen )
  {
    scrollToElem = elem;

    // Go to head of medley so we can open the whole thing.
    while( elem.classList.contains( "css_medleyCont" ) || elem.classList.contains( "css_medleyEnd" ) )
      elem = acc[ elem.accIndex - 1 ];

    // Open this one if it was closed before.
    inMedley = elem.classList.contains( "css_medleyStart" );

    while( elem )
    {
      elem.classList.add( "active" );

      // Make the song name visible in the compressed modes. Need to clear this when minimizing in displaySet() above
      expandSongNameByIndex( elem.accIndex );
      if( elem.accIndex < acc.length - 1 )
        expandSongNameByIndex( elem.accIndex + 1 );

      var panel = elem.nextElementSibling;
      setFontProperty(); // w/o this changing the font only applies to the open song. Possibly desirable.
      panel.style.display = "block";
  
      if( inMedley )
      {
        elem = acc[ elem.accIndex + 1 ];
        if( elem.classList.contains( "css_medleyEnd" ) )
          inMedley = false;
      }
      else
        elem = undefined;
    }
    scrollToElem.scrollIntoView();
  }
}

function changeSong( delta )
{
  if( ( ( currentSong == 0 ) && ( delta < 0 ) ) ||
      ( ( currentSong == acc.length ) && ( delta > 0 ) ) )
    return;

  currentSong += delta;

  accordionClick( acc[ currentSong ], true );
}

var acc = document.getElementsByClassName( "accordion" );

songNames = [];

for( var i = 0;i < acc.length;i++ )
{
  songNames[ i ] = acc[ i ].innerHTML;
  acc[ i ].addEventListener( "click", function() { accordionClick( this ); } );
  acc[ i ].nextElementSibling.addEventListener( "click", function() { this.previousElementSibling.scrollIntoView(); } );
  acc[ i ].accIndex = i;
}

displaySet( DISPLAY_LARGE );

// Footswitch stuff for page up/down Font +/-

class FootSwitchButton
{
  constructor( identifier )
  {
    this.buttonID = identifier;
    this.buttonState = false;
    this.holdTimerExpired = false;
  }

  setState( newState )
  {
    if( newState != this.buttonState )
    {
      this.buttonState = newState;

      if( newState ) // true = 'down'
      {
        this.holdTimerExpired = false;
        this.holdTimer = setTimeout( holdTimerCB, 500, this.buttonID );
      }
      else // released. (up)
      {
        if( this.holdTimerExpired )
          this.holdTimerExpired = false;
        else
        {
          clearTimeout( this.holdTimer );
          //this.buttonID == 0 ? console.log( "Song Up" ) : console.log( "Song Down" );
          changeSong( this.buttonID == 0 ? -1 : 1 ); // tap action
        }
      }
    }
  }

  holdTimerCB()
  {
    this.holdTimerExpired = true;
    //this.buttonID == 0 ? console.log( "Font -" ) : console.log( "Font +" );
    this.buttonID == 0 ? fontMinus() : fontPlus();
  }
}

function holdTimerCB( ButtonID )
{
  footSwitchButtons[ ButtonID ].holdTimerCB();
}

var footSwitchButtons = [];
footSwitchButtons[ 0 ] = new FootSwitchButton( 0 );
footSwitchButtons[ 1 ] = new FootSwitchButton( 1 );

function keyHandler( e, state )
{
  var ix;

  switch( e.code )
  {
    case 'ArrowUp':
      ix = 0; break;
    case 'ArrowDown':
      ix = 1; break;

    default:
      return;
  } 

  footSwitchButtons[ ix ].setState( state );
}

document.addEventListener( 'keydown', keyPressedHandler );
document.addEventListener( 'keyup',   keyRelHandler );

function keyPressedHandler( e ) { e.preventDefault();keyHandler( e, true ); } // down / pressed
function keyRelHandler( e ) { e.preventDefault();keyHandler( e, false ); } // up / released

</script> </body> </html>